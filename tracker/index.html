<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZSM Seven Portfolio Tracker</title>
    <link rel="stylesheet" href="../static/styles.css">
</head>
<body>
    <h1>ZSM Seven Portfolio Tracker</h1>
    <p>Baseline as of October 10, 2025. Starting portfolio: $100,000</p>
    <p>Current prices as of <span id="current-date"></span></p>
    <table id="portfolio-table">
        <thead>
            <tr>
                <th>Asset</th>
                <th>Ticker</th>
                <th>Weight</th>
                <th>Baseline Price</th>
                <th>Current Price</th>
                <th>Shares/Units</th>
                <th>Original Value</th>
                <th>Current Value</th>
                <th>Change</th>
            </tr>
        </thead>
        <tbody id="portfolio-body">
            <!-- Rows will be added by JS -->
        </tbody>
        <tfoot>
        </tfoot>
    </table>
    <script>
        // Data
        const portfolio = [
            { name: 'Bitcoin', ticker: 'BTC-USD', weight: 0.244, baselinePrice: 121654 },
            { name: 'iShares Gold Trust', ticker: 'IAU', weight: 0.146, baselinePrice: 75.58 },
            { name: 'Broadcom Inc.', ticker: 'AVGO', weight: 0.122, baselinePrice: 343.82 },
            { name: 'Tesla, Inc.', ticker: 'TSLA', weight: 0.122, baselinePrice: 439.77 },
            { name: 'Palantir Technologies', ticker: 'PLTR', weight: 0.122, baselinePrice: 185.72 },
            { name: 'Nvidia Corporation', ticker: 'NVDA', weight: 0.122, baselinePrice: 192.53 },
            { name: 'Robinhood Markets', ticker: 'HOOD', weight: 0.122, baselinePrice: 151.62 }
        ];
        const startingValue = 100000;

        // Current prices (hardcoded, update manually for static site)
        const currentPrices = {
            'BTC-USD': 114988, // Will be updated live
            'IAU': 75.11,
            'AVGO': 347.68,
            'TSLA': 439.40,
            'PLTR': 185.88,
            'NVDA': 194.84,
            'HOOD': 151.40,
            '^GSPC': 6654.72,
            '^IXIC': 22694.61
        };

        // Function to fetch current prices
        async function fetchPrices() {
            // Fetch BTC
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
                const data = await response.json();
                currentPrices['BTC-USD'] = data.bitcoin.usd;
            } catch (e) {
                console.error('Error fetching BTC price:', e);
            }
        }

        // Calculate and display
        async function displayPortfolio() {
            await fetchPrices(); // Fetch live prices

            // Update current date
            const currentDate = new Date().toLocaleDateString();
            document.getElementById('current-date').textContent = currentDate;

            let totalCurrentValue = 0;
            let totalBaselineValue = 0;
            const tbody = document.getElementById('portfolio-body');

            portfolio.forEach(asset => {
                const allocation = asset.weight * startingValue;
                const shares = allocation / asset.baselinePrice;
                const currentPrice = currentPrices[asset.ticker];
                const currentValue = shares * currentPrice;
                const baselineValue = allocation;
                const change = currentValue - baselineValue;
                const changePercent = ((currentValue / baselineValue - 1) * 100).toFixed(2);

                totalCurrentValue += currentValue;
                totalBaselineValue += baselineValue;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${asset.name}</td>
                    <td>${asset.ticker}</td>
                    <td>${(asset.weight * 100).toFixed(1)}%</td>
                    <td>$${asset.baselinePrice.toLocaleString()}</td>
                    <td>$${currentPrice.toLocaleString()}</td>
                    <td>${shares.toFixed(4)}</td>
                    <td>$${baselineValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>$${currentValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>$${change.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} (${changePercent}%)</td>
                `;
                tbody.appendChild(row);
            });

            // Total row
            const totalChange = totalCurrentValue - totalBaselineValue;
            const totalChangePercent = ((totalCurrentValue / totalBaselineValue - 1) * 100).toFixed(2);
            const totalRow = document.createElement('tr');
            totalRow.innerHTML = `
                <td colspan="7"><strong>ZSM Seven Total Return since published on 10/10/2025:</strong></td>
                <td>$${totalCurrentValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                <td>$${totalChange.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} (${totalChangePercent}%)</td>
            `;
            tbody.appendChild(totalRow);

            // Benchmarks
            const benchmarks = [
                { name: 'S&P 500', baselinePrice: 6748.10, currentPrice: 6654.72 },
                { name: 'NASDAQ', baselinePrice: 23063.20, currentPrice: 22694.61 }
            ];

            benchmarks.forEach(benchmark => {
                const shares = startingValue / benchmark.baselinePrice;
                const currentPrice = benchmark.currentPrice;
                const baselinePrice = benchmark.baselinePrice;
                const baselineValue = startingValue;
                const currentValue = shares * currentPrice;
                const change = currentValue - baselineValue;
                const changePercent = ((currentValue / baselineValue - 1) * 100).toFixed(2);

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${benchmark.name}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>$${baselinePrice.toLocaleString()}</td>
                    <td>$${currentPrice.toLocaleString()}</td>
                    <td>${shares.toFixed(4)}</td>
                    <td>$${baselineValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>$${currentValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>$${change.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} (${changePercent}%)</td>
                `;
                tbody.appendChild(row);
            });

        }

        // Run on load
        displayPortfolio();
    </script>
</body>
</html>